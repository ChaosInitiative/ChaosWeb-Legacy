@using ChaosInitiative.Web.Shared
<!DOCTYPE html>
<html lang="en">
<head>
    <title>@ViewData["Title"] - Chaos Initiative Control Panel</title>
    <partial name="_LayoutHeadPartial"/>
</head>
<body>
<nav role="navigation" class="navbar navbar-expand-md navbar-dark">
    <a class="navbar-brand pl-3 mr-auto" href="/">
        <img src="~/img/chaos_logo_square.png" alt="Chaos Logo" class="d-inline-block align-bottom mr-3" loading="lazy" width="50" height="50"/>
        <span class="h1 m-0">@ViewData["Title"]</span>
    </a>
    
    <span class="navbar-text pr-3">
        @{
            if (User.Identity.IsAuthenticated)
            {
                <partial name="Partials/IdentityCapsulePartial"/>
            }
            else
            {
                <p>Not logged in</p>
            }
        }
    </span>
    
</nav>

<div class="row h-100">
    <div class="col col-md-2 bg-light h-100">
        <ul class="nav flex-column nav-pills">
            @{

                Navbar navbar = Navbar.GetNavbarControlPanel();

                foreach (KeyValuePair<string, string> pair in navbar.Pages)
                {
                    if (Context.Request.Path.ToString().StartsWith(pair.Key))
                    {
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="@pair.Key">@pair.Value</a>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item">
                            <a class="nav-link" href="@pair.Key">@pair.Value</a>
                        </li>
                    }
                }
            }
        </ul>
    </div>

    <div class="col col-md-8 col-sm-12 justify-content-around p-0">
        @RenderBody()
    </div>
</div>

</body>
</html>