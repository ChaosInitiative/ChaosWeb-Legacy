@using ChaosInitiative.Web.Shared
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - Chaos Initiative Control Panel</title>
    <link rel="stylesheet" href="~/css/boosted_chaos.min.css"/>
    <link rel="stylesheet" href="~/css/control_panel.css"/>
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.1/js/jquery.tablesorter.min.js" integrity="sha384-QnFIXbEfAgO7z63b/aNzTSdSNLoNiNX/mk/Ok+NpUNMnvriWLo5cOtB0OUCAdKNu" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.2/js/swiper.min.js" integrity="sha384-fOtis9P3S4B2asdoye1/YBpXMaRmuXu925gZhfQA/gnU3dLnftD8zvpk/lhP0YSG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/boosted@4.5.2/dist/js/boosted.min.js" integrity="sha384-Ochdn7tEptQMWvKZ+UJHlK48cRq+lpQfD+cvNHas5cOG62XdpPFzZDjO303+fISm" crossorigin="anonymous"></script>

</head>
<body>
<nav role="navigation" class="navbar navbar-expand-md navbar-dark">
    <a class="navbar-brand pl-3 mr-auto" href="/">
        <img src="img/chaos_logo_square.png" alt="Chaos Logo" class="d-inline-block align-bottom mr-3" loading="lazy" width="50" height="50"/>
        <span class="h1 m-0">@ViewData["Title"]</span>
    </a>
    
    <span class="navbar-text pr-3">
        @{
            if (User.Identity.IsAuthenticated)
            {
                string avatarUrl = $"https://github.com/{User.Identity.Name}.png";
                <a href="https://github.com/@User.Identity.Name" style="color: white; text-decoration: none">
                    <img src="@avatarUrl" alt="Avatar of @User.Identity.Name" width="30" height="30"/>
                    <span>@User.Identity.Name</span>
                </a>
            }
            else
            {
                <p>Not logged in</p>
            }
        }
    </span>
    
</nav>

<div class="row h-100">
    <div class="col col-md-2 bg-light h-100">
        <ul class="nav flex-column nav-pills">
            @{

                Navbar navbar = Navbar.GetNavbarControlPanel(User.Identity.IsAuthenticated);

                foreach (KeyValuePair<string, string> pair in navbar.Pages)
                {
                    if (Context.Request.Path.ToString().StartsWith(pair.Key))
                    {
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="@pair.Key">@pair.Value</a>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item">
                            <a class="nav-link" href="@pair.Key">@pair.Value</a>
                        </li>
                    }
                }
            }
        </ul>
    </div>

    <div class="col col-md-8 col-sm-12 justify-content-around p-0">
        @RenderBody()
    </div>
</div>

</body>
</html>